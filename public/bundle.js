!function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t){"use strict";!function(e,t){var a={create:function(e,a){var r=t.createElement(e);for(var n in a)r[n]=a[n];return r}},r=function(e){this.el=t.getElementById(e),this.tests=[]};r.prototype.recordValue=function(e){var r=a.create("div",{className:"TestInfo"}),n=a.create("div",{className:"TestInfoTime",innerHTML:"Time: "+e.time+"ms"}),i=a.create("div",{className:"TestInfoIteration",innerHTML:"Iteration: "+e.iteration});r.appendChild(n),r.appendChild(i),t.getElementById(e.id).appendChild(r)},r.prototype.countTime=function(e){for(var t=(new Date).getTime(),a=0,r=e.iteration||1;r>a;a++)e.func(a);var n=(new Date).getTime(),i=n-t,s={time:i,iteration:e.iteration,id:e.id};return this.recordValue(s),s},r.prototype.createContainer=function(e){var r=a.create("div",{id:e.id,className:"Test"}),n=a.create("div",{className:"TestTitle",innerHTML:e.title||"Test"}),i=a.create("div",{className:"TestScript"}),s=a.create("div",{className:"TestRemove"});s.setAttribute("data-victim",e.id),i.appendChild(this.makeCode(e.func||e.funcString)),s.addEventListener("click",function(){if(confirm("Are you sure ?")){for(var e=JSON.parse(localStorage.getItem("jsTestFunction")),a=this.getAttribute("data-victim"),r=0,n=0,i=e.length;i>n;n++)!function(e,t){t.id===a&&(r=e)}(n,e[n]);e.splice(r,1),localStorage.setItem("jsTestFunction",JSON.stringify(e)),t.getElementById(a).remove()}}),r.appendChild(n),r.appendChild(i),r.appendChild(s),this.el.appendChild(r)},r.prototype.makeCode=function(e){for(var r=[]+e,n=t.createDocumentFragment(),i=/[{;}]/g,s=r.match(i),c=r.split(i),o=1,d=0,l=c.length<2?c.length:c.length-1;l>d;d++)if(n.appendChild(a.create("div",{className:"Code Code--Level-"+o,innerHTML:""+c[d]+(s?s[d]:"")})),s)switch(s[d]){case"{":o++;break;case"}":o--}return n},r.prototype.createCanvas=function(){var e=a.create("div",{className:"ScriptCanvas--Wrap"}),t=a.create("textarea",{id:"canvas",className:"ScriptCanvas"}),r=a.create("input",{type:"text",id:"canvas_iteration",className:"ScriptCanvasIter",placeholder:"Add iteration count"}),n=a.create("input",{type:"text",id:"canvas_title",className:"ScriptCanvasTitle",placeholder:"Add test title"}),i=a.create("div",{id:"canvas_btn",className:"ScriptCanvasButton"}),s=a.create("div",{id:"canvas_error",className:"ScriptCanvasError"});i.appendChild(s),t.addEventListener("keydown",function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation())}),i.addEventListener("click",function(){if(0===t.value.length)return this.triggerError("Need add code"),!1;if(0===n.value.length)return this.triggerError("Need add title"),!1;try{this.createTest({title:n.value,iteration:r.value,funcString:t.value,func:new Function("return function test(){"+t.value+"}")()})}catch(e){this.triggerError("I can't parse function ")}}.bind(this)),e.appendChild(t),e.appendChild(r),e.appendChild(n),e.appendChild(i),this.el.insertBefore(e,this.el.children[0])},r.prototype.triggerError=function(e){var a=t.getElementById("canvas_error");a.innerHTML=e,setTimeout(function(){a.innerHTML=null},2e3)},r.prototype.createTest=function(e){this.tests.push(e),Object.defineProperty(e,"id",{writable:!1,value:"app_"+this.tests.length}),this.createContainer(e);var t=this.countTime(e);t.funcString=e.funcString;var a=JSON.parse(localStorage.getItem("jsTestFunction"))||[];a.push(t),localStorage.setItem("jsTestFunction",JSON.stringify(a))};var n=new r("app");n.createCanvas();var i=localStorage.getItem("jsTestFunction");if(i)for(var s=JSON.parse(i),c=0,o=s.length;o>c;c++)n.tests.push(s[c]),n.createContainer(s[c]),n.recordValue(s[c])}(window,document)}]);